<!DOCTYPE html>
<html style="height:100%" lang="en" >

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>Create Home Page</title>


    <link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css'>
    <link rel="stylesheet" href="./css/style.css">
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="./js/js.cookie.js"></script>
    <script src="./js/jumpFunction.js"></script>
    <script src="./js/createHome.js"></script>

    
</head>

<body>
<div id = "wrap">
    <div class="regbar">
        <div class = "regbar-left" style="width:30%">
            <img src = "./img/CoTube-logo.png" style = "margin-top:0px;" width = "125px" height = "50px" onclick="gohome()">
        </div>
        <div class = "regbar-mid" align="center">
            <input type="text" class="search_bar" name="search_word" id="search_word" size="35" placeholder="Input for searching...">
            <select class="selectType" id="search_by" name="search_by">
                <option value="keyword">By Keyword</option>
                <option value="author">By Author</option>
            </select>
            <input type="image" src = "./img/search.png" style = "margin-right:3px; width:35px; height:35px" onclick="searchResult()"/>
        </div>

        <div class = "regbar-right" style = "margin-top:7px;">
            <input type="image" src = "../img/create.png" title="Create your comic!" id="create" style = "margin-right:3px;" width = "35px" height = "35px" onclick="goCreate();">
            <input type="image" src = "../img/home.png" title="Home page" id="home" style = "margin-right:3px;" width = "35px" height = "35px" onclick="gohome();">
            <input type="image" src = "../img/message.png" title="Message page" id="message" style = "margin-right:3px;"  height = "35px" onclick="goMessage();">
            <input type="image" src = "../img/profile.png" title="Check your profile!" id="profile" style = "margin-right:3px;"  height = "35px" onclick="goProfile();">
            <input type="image" src = "../img/setting.png" title="Setting page" id="setting" style = "margin-right:3px;"  height = "35px" onclick="gotosetting();">
            <input type="image" src = "../img/sign-in.png" title="Log in" id="login" style = "margin-right:3px;" width = "35px" height = "35px" onclick="login();">
            <input type="image" src = "../img/sign-out.png" title="Sign out" id="signout" style = "margin-right:3px;" width = "35px" height = "35px" onclick="logout();">        </div>




    </div>
</div>


<div class = "text-center">
    <img id="cotube" src = "./img/CoTube-logo.png" width = "50%" height = "50%" >
    <h1 id="cotubeDescription" style="font-size: 50px;line-height: 100%;margin-top: 0px;cursor:default;">Create Center</h1>
</div>
<br>
<br>
<div class = "text-center">
    <a href="./createComic.html" class="homeButton" id="btn1" onclick="createNewComic()">New Comic</a>
    <button class="homeButton" id="btn2">Play 4-Panel Game</button>




    <div id="create_home_popup" class="modal">


        <div class="modal-content">
            <span id="x1" class="close">&times;</span>

            <div id="private_public_game" class="private_public_game">
                <button id="pbtn1" class="kwbtn kwbtn2" onclick="privateGamePop()">Play Private Game</button>
                <button id="pbtn2" class="kwbtn kwbtn2" onclick="publicGame()">Play Public Game</button>
            </div>

            <!-- private option -->
            <div id="private_game" style="display: none; margin: auto">
                <table style="margin: auto; text-align: left; margin-top: 15px">
                    <tr>
                        <td style="text-align: right; padding-right: 5px"><label style="margin-bottom: 10px">Keyword:</label></td>
                        <td><input id="priKW" class="form-control" style="width: 200px; margin-bottom:10px; display: inline-block" placeholder="input your keyword..."/></td>
                        <td style="padding-left: 5px"><button class="kwbtn kwbtn2" style="margin-top:0px; margin-bottom: 10px" onclick="randomKeyword();">Random</button></td>
                    </tr>
                    <tr>
                        <td style="text-align: right; padding-right: 5px"><label style="margin-bottom: 10px">Invite:</label></td>
                        <td><input id="invite_people" class="form-control" style="width: 200px; margin-bottom:10px; display: inline-block" placeholder="input user name..."/></td>
                        <td style="padding-left: 5px"><button class="kwbtn kwbtn2" id="addbtn" style="margin-top:0px; margin-bottom: 10px" onclick="addUserBelow()">+ add</button></td>
                    </tr>





                </table>
                <div id="all" style="display: inline-flex; font-size: 18px; line-height: 100%;">
                    <div>
                        <div id="addhere1" style="display: none" class="addUser">
                            <label id="add1name" ></label><label> </label>
                            <span id="add1close" class="someclose" style="opacity:0.8" onclick="delete1()">&#10006;</span>
                        </div>
                        <div style="width: 100%; display: none" id="u1o">
                            <select id="user1option">
                                <option id="user1default" value=" ">Order</option>
                                <option id="user1_2" value="2">2nd Panel</option>
                                <option id="user1_3" value="3">3rd Panel</option>
                                <option id="user1_4" value="4">4th Panel</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div id="addhere2" style="display: none" class="addUser">
                            <label id="add2name" ></label><label> </label>
                            <span id="add2close" class="someclose" style="opacity:0.8" onclick="delete2()">&#10006;</span>
                        </div>
                        <div style="width: 100%; display: none" id="u2o">
                            <select id="user2option">
                                <option id="user2default" value=" ">Order</option>
                                <option id="user2_2" value="2">2nd Panel</option>
                                <option id="user2_3" value="3">3rd Panel</option>
                                <option id="user2_4" value="4">4th Panel</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div id="addhere3" style="display: none" class="addUser">
                            <label id="add3name"></label><label> </label>
                            <span id="add3close" class="someclose" style="opacity:0.8" onclick="delete3()">&#10006;</span>
                        </div>
                        <div style="width: 100%; display: none" id="u3o">
                            <select id="user3option">
                                <option id="user3default" value=" ">Order</option>
                                <option id="user3_2" value="2">2nd Panel</option>
                                <option id="user3_3" value="3">3rd Panel</option>
                                <option id="user3_4" value="4">4th Panel</option>
                            </select>
                        </div>
                    </div>
                </div>
                <h4 id="error-1" style="color:red;display:none;margin-left:20px;font-weight: 300;">User Does not Exist.</h4>
                <h4 id="error0" style="color:red;display:none;margin-left:20px;font-weight: 300;">Cannot Invite Yourself.</h4>
                <h4 id="error3" style="color:red;display:none;margin-left:20px;font-weight: 300;">Cannot Invite Same Person.</h4>
                <h4 id="error1" style="color:red;display:none;margin-left:20px;font-weight: 300;">Keyword Cannot Be Empty.</h4>
                <h4 id="error4" style="color:red;display:none;margin-left:20px;font-weight: 300;">You Have To Invite At Least One Person.</h4>
                <h4 id="error2" style="color:red;display:none;margin-left:20px;font-weight: 300;">Order Invalid, Order Can Nither Be Repeat Or Empty.</h4>
                <br>
                <button class="kwbtn kwbtn2" id="pribtn1" onclick="create()">Create</button>
                <!-- TODO: delete exist btn?
                <button class="kwbtn kwbtn2" id="pribtn2" onclick="exist()">Exist</button> -->

            </div>


            <!-- public option -->
            <div id="KeywordOption" class="KeywordOption" style="display:none; font-size: 20px; margin-top: 30px">
                <table style="margin: auto; text-align: left">
                    <tr>
                        <td id="lab" style="padding: 20px 20px 30px 0px"><span>Keyword:</span></td>
                        <td style="padding: 20px 20px 30px 0px"><input type="radio" id="kw1" name="kwO" value="random" checked onclick="show1()">Random<br></td>
                        <td style="padding: 20px 0px 30px 0px"><input type="radio" id="kw2" name="kwO" value="custom" onclick="show2()">Custom<br></td>
                    </tr>
                </table>

            </div>

            <div id="kw1display" style="display: none;">
                <button class="kwbtn kwbtn2" onclick="playRandom()">Play</button>
            </div>

            <div id="kw2display" style="display: none">
                <input id="userKW" class="form-control" style="width: 200px; display: inline-block" placeholder="input your keyword..."/><br>
                <button class="kwbtn kwbtn2" onclick="cng()">Create New Game</button>
                <button class="kwbtn kwbtn2" onclick="peg()">Play Exist Game</button>
            </div>
            <h4 id="error5" style="color:red;display:none;margin-left:20px;font-weight: 300;">Keyword Cannot Be Empty.</h4>
            <h4 id="error6" style="color:red;display:none;margin-left:20px;font-weight: 300;">No Exist Game With This Keyword.</h4>
            <script>
                
                function cng() {
                    document.getElementById("error5").style.display = "none";
                    var ukw = document.getElementById("userKW");
                    if(ukw.value==""||ukw.value==null){
                        document.getElementById("error5").style.display = "block";
                    }else{
                        customCreate();
                    }
                }
                function peg() {
                    document.getElementById("error5").style.display = "none";
                    var ukw = document.getElementById("userKW");
                    if(ukw.value==""||ukw.value==null){
                        document.getElementById("error5").style.display = "block";
                    }else{
                        customExist();
                    }
                }



                function privateGamePop() {
                    var game = document.getElementById("private_public_game");
                    game.style.display = "none";
                    var pri = document.getElementById("private_game");
                    pri.style.display = "block";
                    $.cookie("publicGame",false);
                }
                function addUserBelow() {
                    document.getElementById("error-1").style.display = "none";
                    document.getElementById("error0").style.display = "none";
                    document.getElementById("error1").style.display = "none";
                    document.getElementById("error2").style.display = "none";
                    document.getElementById("error4").style.display = "none";
                    document.getElementById("error3").style.display = "none";
                    var user1 = document.getElementById("add1name");
                    var user2 = document.getElementById("add2name");
                    var user3 = document.getElementById("add3name");

                    if(document.getElementById("invite_people").value==""){
                        // <!-- unfinished, user name empty -->
                    }else{
                        var validality;
                        $.ajax({
                            url: "profile.html/checkUser",
                            type: "post",
                            async: false,
                            data: {username: document.getElementById("invite_people").value},
                            success: function (data) {//signUpController to check if the username already exist
                            validality = data;
                            }
                        });
                        if(!validality){
                            document.getElementById("error-1").style.display = "block";
                        }else{
                            if(user1.innerText==""||user1.innerText==null){
                                if(document.getElementById('invite_people').value==$.cookie('username')){
                                    document.getElementById("error0").style.display = "block";
                                }else{
                                    user1.innerText = document.getElementById("invite_people").value;
                                    var tag1 = document.getElementById("addhere1");
                                    tag1.style.display = "block";
                                    var u1o = document.getElementById("u1o");
                                    u1o.style.display = "block";
                                }
                            }
                            else if(user2.innerText==""||user2.innerText==null){
                                if(document.getElementById('invite_people').value==$.cookie('username')){
                                    document.getElementById("error0").style.display = "block";
                                }else{
                                    user2.innerText = document.getElementById("invite_people").value;
                                    if(user2.innerText==user1.innerText){
                                        document.getElementById("error3").style.display = "block";
                                        user2.innerText = "";
                                    }else {
                                        var tag2 = document.getElementById("addhere2");
                                        tag2.style.display = "block";
                                        var u2o = document.getElementById("u2o");
                                        u2o.style.display = "block";
                                    }
                                }
                            }else if(user3.innerText==""||user3.innerText==null){
                                if(document.getElementById('invite_people').value==$.cookie('username')){
                                    document.getElementById("error0").style.display = "block";
                                }else{
                                    user3.innerText = document.getElementById("invite_people").value;
                                    if(user3.innerText==user1.innerText||user3.innerText==user2.innerText){
                                        document.getElementById("error3").style.display = "block";
                                        user3.innerText = "";
                                    }else {
                                        var tag3 = document.getElementById("addhere3");
                                        tag3.style.display = "block";
                                        var btndisable = document.getElementById("addbtn");
                                        btndisable.disabled = true;
                                        var u3o = document.getElementById("u3o");
                                        u3o.style.display = "block";
                                    }
                                }
                            }
                        }
                    }
                    document.getElementById("invite_people").value = "";
                }

                function delete1() {
                    user1 = document.getElementById("add1name");
                    user2 = document.getElementById("add2name");
                    user3 = document.getElementById("add3name");
                    if(user2.innerText==""||user2.innerText==null){
                        user1.innerText = "";
                        var tag1 = document.getElementById("addhere1");
                        tag1.style.display = "none";
                        var u1o = document.getElementById("u1o");
                        u1o.style.display = "none";
                        document.getElementById("user1option").value = " ";
                    }else{
                        user1.innerText = user2.innerText;
                        delete2();
                    }
                }

                function delete2() {
                    user2 = document.getElementById("add2name");
                    user3 = document.getElementById("add3name");
                    if(user3.innerText==""||user3.innerText==null){
                        user2.innerText = "";
                        var tag2 = document.getElementById("addhere2");
                        tag2.style.display = "none";
                        var u2o = document.getElementById("u2o");
                        u2o.style.display = "none";
                        document.getElementById("user2option").value = " ";
                    }else{
                        user2.innerText = user3.innerText;
                        delete3();
                    }
                }

                function delete3() {
                    user3 = document.getElementById("add3name");
                    user3.innerText = "";
                    var btndisable = document.getElementById("addbtn");
                    btndisable.disabled = false;
                    var tag3 = document.getElementById("addhere3");
                    tag3.style.display = "none";
                    var u3o = document.getElementById("u3o");
                    u3o.style.display = "none";
                    document.getElementById("user3option").value = " ";
                }

                function create() {
                    document.getElementById("error1").style.display = "none";
                    document.getElementById("error2").style.display = "none";
                    document.getElementById("error4").style.display = "none";
                    document.getElementById("error3").style.display = "none";
                    var kwd = document.getElementById("priKW");
                    if(kwd.value==""||kwd.value==null){
                        document.getElementById("error1").style.display = "block";
                    }
                    var per1 = document.getElementById("add1name");
                    var per2 = document.getElementById("add2name");
                    var per3 = document.getElementById("add3name");
                    var pos1 = document.getElementById("user1option");
                    var pos2 = document.getElementById("user2option");
                    var pos3 = document.getElementById("user3option");
                    var user2 = null;
                    var user3 = null;
                    var user4 = null;
                    if(per1.innerText==""||per1.innerText==null){
                        document.getElementById("error4").style.display = "block";
                    }else if(per2.innerText==""||per2.innerText==null){
                        if(pos1.value==" "){
                            document.getElementById("error2").style.display = "block";
                        }else{
                            // if(pos1.value=="2"){
                            //     privateGame(per1.innerText,null,null);
                            // }else if(pos1.value=="3"){
                            //     privateGame(null,per1.innerText,null);
                            // }else if(pos1.value=="4"){
                            //     privateGame(null,null,per1.innerText);
                            // }
                            switch (pos1.value){
                                case "2":
                                    user2 = per1.innerText;
                                    break;
                                case "3":
                                    user3 = per1.innerText;
                                    break;
                                case "4":
                                    user4 = per1.innerText;
                                    break;
                                default:
                                    console.log("error 355");
                            }
                            privateGame(user2,user3,user4);
                        }
                    }else if(per3.innerHTML==""||per3.innerText==null){
                        if(pos1.value==pos2.value||pos1.value==" "||pos2.value==" "){
                            document.getElementById("error2").style.display = "block";
                        }else{
                            switch (pos1.value){
                                case "2":
                                    user2 = per1.innerText;
                                    break;
                                case "3":
                                    user3 = per1.innerText;
                                    break;
                                case "4":
                                    user4 = per1.innerText;
                                    break;
                                default:
                                    console.log("error 387");
                            }
                            switch (pos2.value){
                                case "2":
                                    user2 = per2.innerText;
                                    break;
                                case "3":
                                    user3 = per2.innerText;
                                    break;
                                case "4":
                                    user4 = per2.innerText;
                                    break;
                                default:
                                    console.log("error 400");
                            }
                            privateGame(user2,user3,user4);
                        }
                    }else if(pos1.value==" "||pos2.value==" "||pos3.value==" "||pos1.value==pos2.value||pos1.value==pos3.value||pos2.value==pos3.value){
                        document.getElementById("error2").style.display = "block";
                    }else{
                        switch (pos1.value){
                            case "2":
                                user2 = per1.innerText;
                                break;
                            case "3":
                                user3 = per1.innerText;
                                break;
                            case "4":
                                user4 = per1.innerText;
                                break;
                            default:
                                console.log("error 405");
                        }
                        switch (pos2.value){
                            case "2":
                                user2 = per2.innerText;
                                break;
                            case "3":
                                user3 = per2.innerText;
                                break;
                            case "4":
                                user4 = per2.innerText;
                                break;
                            default:
                                console.log("error 418");
                        }
                        switch (pos3.value){
                            case "2":
                                user2 = per3.innerText;
                                break;
                            case "3":
                                user3 = per3.innerText;
                                break;
                            case "4":
                                user4 = per3.innerText;
                                break;
                            default:
                                console.log("error 431");
                        }
                        privateGame(user2,user3,user4);
                    }
                }

                
                function publicGame() {
                    var game = document.getElementById("private_public_game");
                    game.style.display = "none";
                    var KeywordOption = document.getElementById("KeywordOption");
                    KeywordOption.style.display = "block";
                    $.cookie("publicGame",true);
                    show1();
                }
                function show1() {
                    var modal1 = document.getElementById("kw1display");
                    var modal2 = document.getElementById("kw2display");
                    var btn1 = document.getElementById("kw1");
                    var btn2 = document.getElementById("kw2");
                    modal1.style.display = "block";
                    modal2.style.display = "none";
                    var kwo = document.getElementById("KeywordOption");
                    kwo.style.marginTop = "30px";
                }

                function show2() {
                    var modal1 = document.getElementById("kw1display");
                    var modal2 = document.getElementById("kw2display");
                    var btn1 = document.getElementById("kw1");
                    var btn2 = document.getElementById("kw2");
                    modal2.style.display = "block";
                    modal1.style.display = "none";
                    var kwo = document.getElementById("KeywordOption");
                    kwo.style.marginTop = "0";
                }
            </script>

        </div>


    </div>
    <script>

        var cusername = $.cookie('username');
        if(cusername=="null" || cusername==undefined){
            document.location.href="./index.html";
        }

        var modal = document.getElementById('create_home_popup');
        var btn = document.getElementById("btn2");
        var span = document.getElementsByClassName("close")[0];

        function hidAll(){
            var game = document.getElementById("private_public_game");
            game.style.display = "none";
            var KeywordOption = document.getElementById("KeywordOption");
            KeywordOption.style.display = "none";
            var modal1 = document.getElementById("kw1display");
            var modal2 = document.getElementById("kw2display");
            modal1.style.display = "none";
            modal2.style.display = "none";
            document.getElementById("kw1").checked = true;
            document.getElementById("kw2").checked = false;
            var pri = document.getElementById("private_game");
            pri.style.display = "none";
            document.getElementById("userKW").value = "";
            delete3();
            delete2();
            delete1();
            document.getElementById("error1").style.display = "none";
            document.getElementById("error2").style.display = "none";
            document.getElementById("error4").style.display = "none";
        }


        btn.onclick = function() {
            modal.style.display = "block";
        }
        var x1 = document.getElementById("x1");
        x1.onclick = function() {
            modal.style.display = "none";
            hidAll();
            var game = document.getElementById("private_public_game");
            game.style.display = "block";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                hidAll();
                var game = document.getElementById("private_public_game");
                game.style.display = "block";
            }
        }
    </script>





</div>
<br><br>

<div style="display:initial" class="infoooooo">

    <h4>What is Game Comic?</h4>
    <p>The 4-Panel Game Comic is a game in which four players each contribute one panel to a comic based around the keyword and the panels of other players in order to create a unique comic. Game comics can be <span style="color: orangered">public</span> (open for anyone) or <span style="color: orangered">private</span> (open to those invited) and will use a keyword which is <span style="color: orangered">random</span> (randomly picked from our database) or <span style="color: orangered">custom</span> (user input). To create your own game comic, click on the “Play 4-Panel Game” button on the create comic home page. Afterwards you will be prompted to select the type of game you want.</p><br>
    <h4>Public</h4>
    <p>Upon clicking the public game option, you will be prompted to select what type of keyword you would like for your game comic. 
    </p>
    <p>If random keyword is selected, If there is a public game comic in progress with an open panel slot, you will be put into that game for that panel number, otherwise a new game comic will be created with a randomly selected keyword from our database and you will be drawing the first panel.
    </p>
    <p>If custom keyword is selected, type your custom keyword in the respective field. Then:
            Clicking the “Play Exist Game” button will check to see if there is an open slot for a public game with your keyword. If it exists it will put you into that game for that panel slot, otherwise it will throw an error.
            Clicking the “Create New Game” button will simply create a new game comic with your custom keyword and assign you as the first panelist.
            </p><br>
    <h4>Private</h4>
    <p>After clicking the private game option, you will be presented with some fields. 
    </p>
    <p>For the keyword field you can type in a custom keyword or click the random button to get a random keyword. 
    </p>
    <p>The invite field allows you to add users by typing in their username and then clicking the add button. After adding them to the game, you must then select what panel they will be assigned in the game comic. The creator of the game comic is always the first panel. Users invited will receive a notification with a link to draw the panel for the game.
    </p>
        <p>**You must invite at least 1 other player to start the game. You can add another user later by going to your profile page and clicking the “+” button on your unfinished game comic. In addition, you can also make your game public to give other people the chance to participate on your profile page by clicking the “P” button. 
            </p><br>
    
    <h4>Drawing + Saving</h4>
    <p>After getting into a game, you will be presented with the canvas and the current state of the 3 other panels in your game. You can click on these panels to get a better view. Use the painting tools provided to draw your panel with regards to the keyword and other panels. When you are done, go to file on the top left of the canvas toolbar and click on “Save to Cotube” or alternatively use the keyboard shortcut Ctrl + S. If saved successfully, you will be redirected to a page to input your title. The title of your panel will be combined with the title of all the other panels to form the title of the game comic. After you finished, you will receive a notification message when all other panels are complete and the game comic is published for viewing.
        </p>        

</div>





<script>
    if($.cookie('role')=="user"){
        document.getElementById("login").style.display = "none";
    }else{
        document.getElementById("create").style.display = "none";
        document.getElementById("signout").style.display = "none";
        document.getElementById("message").style.display = "none";
        document.getElementById("profile").style.display = "none";
        document.getElementById("setting").style.display = "none";
    }

</script>
</body>

</html>
